<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='GXC-button-OlButton'>/**
</span> * An abstract button component that controls a provided OpenLayers.Control.
 * Enabling/disabling and clicking/toggling the button will be forwared to the
 * Ol control.
 *
 * @class  GXC.button.OlButton
 */
Ext.define(&#39;GXC.button.OlButton&#39;, {
    extend: &#39;GXC.button.Button&#39;,

    alias: &#39;widget.olbutton&#39;,

<span id='GXC-button-OlButton-cfg-control'>    /**
</span>     * The OpenLayers control this button is bound to.
     *
     * @cfg {OpenLayers.Control.Control}
     */
    control: null,

<span id='GXC-button-OlButton-cfg-map'>    /**
</span>     * The OpenLayers map the bound control should be added to.
     * If map is not set on init of the button component, the
     * control will not be added to any map.
     *
     * @cfg {OpenLayers.Map}
     */
    map: null,

<span id='GXC-button-OlButton-method-initComponent'>    /**
</span>     * @inheritdoc
     */
    initComponent: function() {
        var control = this.control;

        if (control) {
            if (control.active !== null &amp;&amp; !control.active) {
                this.disabled = true;
            }

            control.events.on({
                activate: this.onControlActivate,
                deactivate: this.onControlDeactivate,
                scope: this
            });
        }

        if (control &amp;&amp; this.map) {
            this.map.addControl(control);
        }

        this.callParent(arguments);
    },

<span id='GXC-button-OlButton-method-handler'>    /**
</span>     * On click handler of the button triggering the underlying OpenLayers
     * control.
     * @return {undefined}
     */
    handler: function() {
        var ctrl = this.control;
        if (ctrl &amp;&amp; ctrl.type == OpenLayers.Control.TYPE_BUTTON) {
            ctrl.trigger();
        }
    },

<span id='GXC-button-OlButton-method-toggleHandler'>    /**
</span>     * Called when the button is toggled.
     * @param  {GXC.button.OlButton} btn
     * @param  {Boolean} pressed
     */
    toggleHandler: function(btn, pressed) {
        if (pressed) {
            this.onEnable();
        } else {
            this.onDisable();
        }
    },

<span id='GXC-button-OlButton-method-onEnable'>    /**
</span>     * Triggered when the button component is activated activating the
     * underlying OpenLayers control as well.
     * @return {undefined}
     */
    onEnable: function() {
        if (this.control &amp;&amp; !this.control.active) {
            this.control.activate();
        }
    },

<span id='GXC-button-OlButton-method-onDisable'>    /**
</span>     * Triggered when the button component is deactivated disabling the
     * underlying OpenLayers control as well.
     * @return {undefined}
     */
    onDisable: function() {
        if (this.control &amp;&amp; this.control.active) {
            this.control.deactivate();
        }
    },

<span id='GXC-button-OlButton-method-onControlActivate'>    /**
</span>     * Called when the OpenLayers Control is activated, enabling the button
     * as well
     * @private
     */
    onControlActivate: function() {
        var control = this.control;
        if (control.type == OpenLayers.Control.TYPE_BUTTON) {
            this.enable();
        }
    },

<span id='GXC-button-OlButton-method-onControlDeactivate'>    /**
</span>     * Called when the OpenLayers Control is deactivated.
     * See GeoExt.Action.
     * @private
     */
    onControlDeactivate: function() {
        var control = this.control;
        if (control.type == OpenLayers.Control.TYPE_BUTTON) {
            this.disable();
        }
    },

<span id='GXC-button-OlButton-method-destroy'>    /**
</span>     * Clean up function called on destruction of the button component.
     * @private
     */
    destroy: function() {
        if (this.control &amp;&amp; this.map) {
            this.map.removeControl(this.control);
        }

        delete this.control;
        delete this.map;

        this.callParent(arguments);
    }
});
</pre>
</body>
</html>
