<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*
This file is part of Ext JS 4.2

Copyright (c) 2011-2013 Sencha Inc

Contact:  http://www.sencha.com/contact

GNU General Public License Usage
This file may be used under the terms of the GNU General Public License version 3.0 as
published by the Free Software Foundation and appearing in the file LICENSE included in the
packaging of this file.

Please review the following information to ensure the GNU General Public License version 3.0
requirements will be met: http://www.gnu.org/copyleft/gpl.html.

If you are unsure which license is appropriate for your use, please contact the sales department
at http://www.sencha.com/contact.

Build date: 2013-05-16 14:36:50 (f9be68accb407158ba2b1be2c226a6ce1f649314)
*/
<span id='Ext-toolbar-Toolbar-method-constructor'><span id='Ext-toolbar-Toolbar'>/**
</span></span> * Basic Toolbar class. Although the {@link Ext.container.Container#defaultType defaultType} for
 * Toolbar is {@link Ext.button.Button button}, Toolbar elements (child items for the Toolbar container)
 * may be virtually any type of Component. Toolbar elements can be created explicitly via their
 * constructors, or implicitly via their xtypes, and can be {@link #method-add}ed dynamically.
 *
 * ## Some items have shortcut strings for creation:
 *
 * | Shortcut | xtype         | Class                         | Description
 * |:---------|:--------------|:------------------------------|:---------------------------------------------------
 * | &#39;-&gt;&#39;     | `tbfill`      | {@link Ext.toolbar.Fill}      | begin using the right-justified button container
 * | &#39;-&#39;      | `tbseparator` | {@link Ext.toolbar.Separator} | add a vertical separator bar between toolbar items
 * | &#39; &#39;      | `tbspacer`    | {@link Ext.toolbar.Spacer}    | add horizontal space between elements
 *
 *     @example
 *     Ext.create(&#39;Ext.toolbar.Toolbar&#39;, {
 *         renderTo: document.body,
 *         width   : 500,
 *         items: [
 *             {
 *                 // xtype: &#39;button&#39;, // default for Toolbars
 *                 text: &#39;Button&#39;
 *             },
 *             {
 *                 xtype: &#39;splitbutton&#39;,
 *                 text : &#39;Split Button&#39;
 *             },
 *             // begin using the right-justified button container
 *             &#39;-&gt;&#39;, // same as { xtype: &#39;tbfill&#39; }
 *             {
 *                 xtype    : &#39;textfield&#39;,
 *                 name     : &#39;field1&#39;,
 *                 emptyText: &#39;enter search term&#39;
 *             },
 *             // add a vertical separator bar between toolbar items
 *             &#39;-&#39;, // same as {xtype: &#39;tbseparator&#39;} to create Ext.toolbar.Separator
 *             &#39;text 1&#39;, // same as {xtype: &#39;tbtext&#39;, text: &#39;text1&#39;} to create Ext.toolbar.TextItem
 *             { xtype: &#39;tbspacer&#39; },// same as &#39; &#39; to create Ext.toolbar.Spacer
 *             &#39;text 2&#39;,
 *             { xtype: &#39;tbspacer&#39;, width: 50 }, // add a 50px space
 *             &#39;text 3&#39;
 *         ]
 *     });
 *
 * Toolbars have {@link #method-enable} and {@link #method-disable} methods which when called, will
 * enable/disable all items within your toolbar.
 *
 *     @example
 *     Ext.create(&#39;Ext.toolbar.Toolbar&#39;, {
 *         renderTo: document.body,
 *         width   : 400,
 *         items: [
 *             {
 *                 text: &#39;Button&#39;
 *             },
 *             {
 *                 xtype: &#39;splitbutton&#39;,
 *                 text : &#39;Split Button&#39;
 *             },
 *             &#39;-&gt;&#39;,
 *             {
 *                 xtype    : &#39;textfield&#39;,
 *                 name     : &#39;field1&#39;,
 *                 emptyText: &#39;enter search term&#39;
 *             }
 *         ]
 *     });
 *
 * Example
 *
 *     @example
 *     var enableBtn = Ext.create(&#39;Ext.button.Button&#39;, {
 *         text    : &#39;Enable All Items&#39;,
 *         disabled: true,
 *         scope   : this,
 *         handler : function() {
 *             //disable the enable button and enable the disable button
 *             enableBtn.disable();
 *             disableBtn.enable();
 *
 *             //enable the toolbar
 *             toolbar.enable();
 *         }
 *     });
 *
 *     var disableBtn = Ext.create(&#39;Ext.button.Button&#39;, {
 *         text    : &#39;Disable All Items&#39;,
 *         scope   : this,
 *         handler : function() {
 *             //enable the enable button and disable button
 *             disableBtn.disable();
 *             enableBtn.enable();
 *
 *             //disable the toolbar
 *             toolbar.disable();
 *         }
 *     });
 *
 *     var toolbar = Ext.create(&#39;Ext.toolbar.Toolbar&#39;, {
 *         renderTo: document.body,
 *         width   : 400,
 *         margin  : &#39;5 0 0 0&#39;,
 *         items   : [enableBtn, disableBtn]
 *     });
 *
 * Adding items to and removing items from a toolbar is as simple as calling the {@link #method-add}
 * and {@link #method-remove} methods. There is also a {@link #removeAll} method
 * which remove all items within the toolbar.
 *
 *     @example
 *     var toolbar = Ext.create(&#39;Ext.toolbar.Toolbar&#39;, {
 *         renderTo: document.body,
 *         width   : 700,
 *         items: [
 *             {
 *                 text: &#39;Example Button&#39;
 *             }
 *         ]
 *     });
 *
 *     var addedItems = [];
 *
 *     Ext.create(&#39;Ext.toolbar.Toolbar&#39;, {
 *         renderTo: document.body,
 *         width   : 700,
 *         margin  : &#39;5 0 0 0&#39;,
 *         items   : [
 *             {
 *                 text   : &#39;Add a button&#39;,
 *                 scope  : this,
 *                 handler: function() {
 *                     var text = prompt(&#39;Please enter the text for your button:&#39;);
 *                     addedItems.push(toolbar.add({
 *                         text: text
 *                     }));
 *                 }
 *             },
 *             {
 *                 text   : &#39;Add a text item&#39;,
 *                 scope  : this,
 *                 handler: function() {
 *                     var text = prompt(&#39;Please enter the text for your item:&#39;);
 *                     addedItems.push(toolbar.add(text));
 *                 }
 *             },
 *             {
 *                 text   : &#39;Add a toolbar separator&#39;,
 *                 scope  : this,
 *                 handler: function() {
 *                     addedItems.push(toolbar.add(&#39;-&#39;));
 *                 }
 *             },
 *             {
 *                 text   : &#39;Add a toolbar spacer&#39;,
 *                 scope  : this,
 *                 handler: function() {
 *                     addedItems.push(toolbar.add(&#39;-&gt;&#39;));
 *                 }
 *             },
 *             &#39;-&gt;&#39;,
 *             {
 *                 text   : &#39;Remove last inserted item&#39;,
 *                 scope  : this,
 *                 handler: function() {
 *                     if (addedItems.length) {
 *                         toolbar.remove(addedItems.pop());
 *                     } else if (toolbar.items.length) {
 *                         toolbar.remove(toolbar.items.last());
 *                     } else {
 *                         alert(&#39;No items in the toolbar&#39;);
 *                     }
 *                 }
 *             },
 *             {
 *                 text   : &#39;Remove all items&#39;,
 *                 scope  : this,
 *                 handler: function() {
 *                     toolbar.removeAll();
 *                 }
 *             }
 *         ]
 *     });
 *
 * @constructor
 * Creates a new Toolbar
 * @param {Object/Object[]} config A config object or an array of buttons to {@link #method-add}
 * @docauthor Robert Dougan &lt;rob@sencha.com&gt;
 */
Ext.define(&#39;Ext.toolbar.Toolbar&#39;, {
    extend: &#39;Ext.container.Container&#39;,
    requires: [
        &#39;Ext.toolbar.Fill&#39;,
        &#39;Ext.layout.container.HBox&#39;,
        &#39;Ext.layout.container.VBox&#39;
    ],
    uses: [
        &#39;Ext.toolbar.Separator&#39;
    ],
    alias: &#39;widget.toolbar&#39;,
    alternateClassName: &#39;Ext.Toolbar&#39;,

<span id='Ext-toolbar-Toolbar-property-isToolbar'>    /**
</span>     * @property {Boolean} isToolbar
     * `true` in this class to identify an object as an instantiated Toolbar, or subclass thereof.
     */
    isToolbar: true,
<span id='Ext-toolbar-Toolbar-cfg-baseCls'>    baseCls  : Ext.baseCSSPrefix + &#39;toolbar&#39;,
</span><span id='Ext-toolbar-Toolbar-property-ariaRole'>    ariaRole : &#39;toolbar&#39;,
</span>
<span id='Ext-toolbar-Toolbar-cfg-defaultType'>    defaultType: &#39;button&#39;,
</span>
<span id='Ext-toolbar-Toolbar-cfg-vertical'>    /**
</span>     * @cfg {Boolean} vertical
     * Set to `true` to make the toolbar vertical. The layout will become a `vbox`.
     */
    vertical: false,

<span id='Ext-toolbar-Toolbar-cfg-layout'>    /**
</span>     * @cfg {Ext.enums.Layout/Object} layout
     * This class assigns a default layout (`layout: &#39;hbox&#39;`).
     * Developers _may_ override this configuration option if another layout
     * is required (the constructor must be passed a configuration object in this
     * case instead of an array).
     * See {@link Ext.container.Container#layout} for additional information.
     */

<span id='Ext-toolbar-Toolbar-cfg-enableOverflow'>    /**
</span>     * @cfg {Boolean} enableOverflow
     * Configure true to make the toolbar provide a button which activates a dropdown Menu to show
     * items which overflow the Toolbar&#39;s width.
     */
    enableOverflow: false,

<span id='Ext-toolbar-Toolbar-cfg-menuTriggerCls'>    /**
</span>     * @cfg {String} menuTriggerCls
     * Configure the icon class of the overflow button.
     */
    menuTriggerCls: Ext.baseCSSPrefix + &#39;toolbar-more-icon&#39;,

<span id='Ext-toolbar-Toolbar-cfg-defaultButtonUI'>    /**
</span>     * @cfg {String} defaultButtonUI
     * A default {@link Ext.Component#ui ui} to use for {@link Ext.button.Button Button} items
     */
    
<span id='Ext-toolbar-Toolbar-property-trackMenus'>    // @private
</span>    trackMenus: true,

<span id='Ext-toolbar-Toolbar-property-itemCls'>    itemCls: Ext.baseCSSPrefix + &#39;toolbar-item&#39;,
</span>
    statics: {
<span id='Ext-toolbar-Toolbar-static-property-shortcuts'>        shortcuts: {
</span>            &#39;-&#39; : &#39;tbseparator&#39;,
            &#39; &#39; : &#39;tbspacer&#39;
        },

<span id='Ext-toolbar-Toolbar-static-property-shortcutsHV'>        shortcutsHV: {
</span>            // horizontal
            0: {
                &#39;-&gt;&#39;: { xtype: &#39;tbfill&#39;, height: 0 }
            },
            // vertical
            1: {
                &#39;-&gt;&#39;: { xtype: &#39;tbfill&#39;, width: 0 }
            }
        }
    },

<span id='Ext-toolbar-Toolbar-method-initComponent'>    initComponent: function() {
</span>        var me = this;

        // check for simplified (old-style) overflow config:
        if (!me.layout &amp;&amp; me.enableOverflow) {
            me.layout = { overflowHandler: &#39;Menu&#39; };
        }

        if (me.dock === &#39;right&#39; || me.dock === &#39;left&#39;) {
            me.vertical = true;
        }

        me.layout = Ext.applyIf(Ext.isString(me.layout) ? {
            type: me.layout
        } : me.layout || {}, {
            type: me.vertical ? &#39;vbox&#39; : &#39;hbox&#39;,
            align: me.vertical ? &#39;stretchmax&#39; : &#39;middle&#39;
        });

        if (me.vertical) {
            me.addClsWithUI(&#39;vertical&#39;);
        }

        // @TODO: remove this hack and implement a more general solution
        if (me.ui === &#39;footer&#39;) {
            me.ignoreBorderManagement = true;
        }

        me.callParent();

<span id='Ext-toolbar-Toolbar-event-overflowchange'>        /**
</span>         * @event overflowchange
         * Fires after the overflow state has changed.
         * @param {Number} lastHiddenCount The number of overflowing items that used to be hidden.
         * @param {Number} hiddenCount The number of overflowing items that are hidden now.
         * @param {Array} The hidden items
         */
        me.addEvents(&#39;overflowchange&#39;);
    },

<span id='Ext-toolbar-Toolbar-method-getRefItems'>    getRefItems: function(deep) {
</span>        var me = this,
            items = me.callParent(arguments),
            layout = me.layout,
            handler;

        if (deep &amp;&amp; me.enableOverflow) {
            handler = layout.overflowHandler;
            if (handler &amp;&amp; handler.menu) {
                items = items.concat(handler.menu.getRefItems(deep));
            }
        }
        return items;
    },

<span id='Ext-toolbar-Toolbar-method-add'>    /**
</span>     * Adds element(s) to the toolbar -- this function takes a variable number of
     * arguments of mixed type and adds them to the toolbar.
     *
     * **Note**: See the notes within {@link Ext.container.Container#method-add}.
     *
     * @param {Ext.Component.../Object.../String.../HTMLElement...} args The following types of arguments are all valid:
     *
     *  - `{@link Ext.button.Button config}`: A valid button config object
     *  - `HtmlElement`: Any standard HTML element
     *  - `Field`: Any form field
     *  - `Item`: Any subclass of {@link Ext.toolbar.Item}
     *  - `String`: Any generic string (gets wrapped in a {@link Ext.toolbar.TextItem}).
     *
     *    Note that there are a few special strings that are treated differently as explained next:
     *
     *      - `&#39;-&#39;`: Creates a separator element
     *      - `&#39; &#39;`: Creates a spacer element
     *      - `&#39;-&gt;&#39;`: Creates a fill element
     *
     * @return {Ext.Component[]/Ext.Component} The Components that were added.
     *
     * @method add
     */
    
<span id='Ext-toolbar-Toolbar-method-insert'>    /**
</span>     * Inserts a Component into this Container at a specified index.
     *
     * @param {Number} index The index at which the Component will be inserted.
     * @param {Ext.Component/Object/String/HTMLElement} component
     * See {@link #method-add} method for overview of possible values.
     * @return {Ext.Component} The component that was inserted.
     * @method insert
     */

<span id='Ext-toolbar-Toolbar-method-lookupComponent'>    // @private
</span>    lookupComponent: function(c) {
        var args = arguments;
        if (typeof c == &#39;string&#39;) {
            var T = Ext.toolbar.Toolbar,
                shortcut = T.shortcutsHV[this.vertical ? 1 : 0][c] || T.shortcuts[c];

            if (typeof shortcut == &#39;string&#39;) {
                c = {
                    xtype: shortcut
                };
            } else if (shortcut) {
                c = Ext.apply({}, shortcut);
            } else {
                c = {
                    xtype: &#39;tbtext&#39;,
                    text: c
                };
            }

            this.applyDefaults(c);
            
            // See: EXTJSIV-7578
            args = [c];
        }

        return this.callParent(args);
    },

<span id='Ext-toolbar-Toolbar-method-applyDefaults'>    // @private
</span>    applyDefaults: function(c) {
        if (!Ext.isString(c)) {
            c = this.callParent(arguments);
        }
        return c;
    },

<span id='Ext-toolbar-Toolbar-method-trackMenu'>    // @private
</span>    trackMenu: function(item, remove) {
        if (this.trackMenus &amp;&amp; item.menu) {
            var method = remove ? &#39;mun&#39; : &#39;mon&#39;,
                me = this;

            me[method](item, &#39;mouseover&#39;, me.onButtonOver, me);
            me[method](item, &#39;menushow&#39;, me.onButtonMenuShow, me);
            me[method](item, &#39;menuhide&#39;, me.onButtonMenuHide, me);
        }
    },

<span id='Ext-toolbar-Toolbar-method-onBeforeAdd'>    // @private
</span>    onBeforeAdd: function(component) {
        var me = this,
            isButton = component.isButton;

        if (isButton &amp;&amp; me.defaultButtonUI &amp;&amp; component.ui === &#39;default&#39; &amp;&amp;
            !component.hasOwnProperty(&#39;ui&#39;)) {
            component.ui = me.defaultButtonUI;
        } else if ((isButton || component.isFormField) &amp;&amp; me.ui !== &#39;footer&#39;) {
            component.ui = component.ui + &#39;-toolbar&#39;;
            component.addCls(component.baseCls + &#39;-toolbar&#39;);
        }

        // Any separators needs to know if is vertical or not
        if (component instanceof Ext.toolbar.Separator) {
            component.setUI((me.vertical) ? &#39;vertical&#39; : &#39;horizontal&#39;);
        }

        me.callParent(arguments);
    },

<span id='Ext-toolbar-Toolbar-method-onAdd'>    // @private
</span>    onAdd: function(component) {
        this.callParent(arguments);
        this.trackMenu(component);
    },
    
<span id='Ext-toolbar-Toolbar-method-onRemove'>    // @private
</span>    onRemove: function(c) {
        this.callParent(arguments);
        this.trackMenu(c, true);
    },
    
<span id='Ext-toolbar-Toolbar-method-getChildItemsToDisable'>    getChildItemsToDisable: function() {
</span>        return this.items.getRange();   
    },

<span id='Ext-toolbar-Toolbar-method-onButtonOver'>    // @private
</span>    onButtonOver: function(btn){
        if (this.activeMenuBtn &amp;&amp; this.activeMenuBtn != btn) {
            this.activeMenuBtn.hideMenu();
            btn.showMenu();
            this.activeMenuBtn = btn;
        }
    },

<span id='Ext-toolbar-Toolbar-method-onButtonMenuShow'>    // @private
</span>    onButtonMenuShow: function(btn) {
        this.activeMenuBtn = btn;
    },

<span id='Ext-toolbar-Toolbar-method-onButtonMenuHide'>    // @private
</span>    onButtonMenuHide: function(btn) {
        delete this.activeMenuBtn;
    }
});</pre>
</body>
</html>
